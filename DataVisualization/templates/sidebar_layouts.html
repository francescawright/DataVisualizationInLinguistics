<!DOCTYPE html>
<html lang="en">

<style>
    .row_cust {
        flex-wrap: wrap;
        margin-left: -10px;
        margin-top: 0px;
    }

    /* Create two equal columns that floats next to each other */
    .column3 {
        font-size: 15px;
        font-family: sans-serif;
        float: left;
        width: 300px;
        padding: 19px;
        line-height: 1;
        height: fit-content;
    }

    .left-5 {
        position: relative;
        left: 5%;
    }

    .btn-form {
        overflow: hidden;
    }

    .field-input {
        width: 100%;
    }

    .form-span {
        display: block;
        overflow: hidden;
        padding-left:5px;
        padding-right:5px;
    }

    .topnav.row {
        margin-right: 0;
    }

    #tree-container #static_values_button.btn-primary.focus, #tree-container #static_values_button.btn-primary:focus{
            color: #000000;
    }

    #input-n-btn, #input-l-btn, #input-gfcomp-btn, #input-gfelon-btn, #input-d-btn, #input-tol-btn {
        padding: 1px 2px;
        margin: 3.2px;
    }

    .devtools-span-input {
        width: 100%;
        width: -moz-available;
        width: -webkit-fill-available;
        width: fill-available;
        margin: auto;
    }

    #target-checkbox-group, #highlight-checkbox-group, #feature-checkbox-group {
        border-radius: 0.25rem;
    }

    #subtrees-btn {
        padding: 10px 30px;
        background: #fff;
        border: 0;
        outline: none;
        cursor: pointer;
        font-size: 22px;
        font-weight: 500;
        border-radius: 30px;
    }

    .subtrees-menu-container {
        width: fit-content;
        max-width: 800px;
        position: absolute;
        height: fit-content;
        border-radius: 25px;
        left: 200px;
        top: -1px;
        opacity: 0;
        transition: all 0.3s;
        background-color: #cccccc;
        transform: scale(0);
        transform-origin: left;
        padding: 20px 15px 20px 15px;
        z-index: 60;
    }
    .show-menu {
        opacity: 1;
        transform: scale(1);
    }
    #subtrees-documents-select {
        width: fit-content;
        margin: auto;
        margin-bottom: 10px;
    }
    .subtrees-dropdown-btn {
        max-width: 300px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        display: inline-block;
        margin-top: 10px;
        margin-left: 5px;
        margin-right: 5px;
    }
    .subtrees-menu-dropdown {
        width: fit-content;
    }
    #subtrees-menu {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
    }
    #empty_subtrees_menu_msg {
        padding: 10px 30px;
        width: 400px;
        font-size: x-large;
        font-weight: 600;
    }
    .left-arrow:after {
        content: '';
        position: absolute;
        left: -20px;
        top: 29px;
        margin: 0 auto;
        width: 0;
        height: 0;
        border-top: 20px solid transparent;
        border-right: 20px solid #cccccc;
        border-bottom: 20px solid transparent;
    }
    .overlay-popup {
        background-color: #eff4fc;
        height: 100%;
        height: -moz-available;          /* WebKit-based browsers will ignore this. */
        height: -webkit-fill-available;  /* Mozilla-based browsers will ignore this. */
        height: fill-available;
        width: 100%;
        width: -moz-available;          /* WebKit-based browsers will ignore this. */
        width: -webkit-fill-available;  /* Mozilla-based browsers will ignore this. */
        width: fill-available;
        border-radius: 0.5rem 0.5rem 0 0;
    }
    .blue-background {
        background: #eff4fc !important;
    }
    ul.tooltip-features {
        list-style: none;
        padding-left: 0;
        margin: 0 80px 0 0;
        font-size: large;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
        line-height: 2rem;
    }
    #main-popup-options {
        display: flex;
        justify-content: space-evenly;
        margin-top: 12px;
    }
    .main-popup-options-btn {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        z-index: 100;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .main-popup-options-btn:hover {
        text-decoration: none;
    }
    .main-popup-options-btn:focus {
        outline: none !important;
    }
    .main-reset-btn, .main-interchange-btn {
        border: #6c757d;
        color: #fff;
        background-color: #6c757d;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .main-reset-btn:hover, .main-interchange-btn:hover {
        color: #fff;
        background-color: #5a6268;
        border-color: #545b62;
    }
    .main-reset-btn:focus, .main-interchange-btn:focus {
        color: #fff;
        background-color: #5a6268;
        border-color: #545b62;
        box-shadow: 0 0 0 0.2rem rgb(130 138 145 / 50%);
    }
    .main-popup-options-img {
        border: 0;
        font-size: 100%;
        vertical-align: baseline;
        margin-block-end: 0;

        max-height: 70%;
        object-fit: contain;
    }
    #main-popup-options-reset-img {
        width: 24px;
    }
    #main-popup-options-interchange-img {
        width: 28px;
    }
    #info-popup-msg-container {
        display: none;
        position: absolute;
        width: 45%;
        right: 36px;
        top: 36px;
        z-index: 55;
    }
    #my-statistic-name {
        font-size: 23px;
        top: 115px;
        vertical-align: middle;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        display: inline-block;
        max-width: 450px;
        margin: 0;
    }
</style>

<head>
    {% load static %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="../static/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

</head>

<div style="display: inline-block; width: calc(calc(100vw - (100vw - 100%)));overflow-x: clip;">
    <div class="row_cust" style="display: block;">

        <div id="menu-left" style="margin-top: -100px;" class="column3">


            {#            <p#}
            {#                    style="text-align: center; margin-top: 0px; margin-bottom: 0px; font-weight: bold; font-family:cursive; font-size: 20px;">#}
            {#                Menu</p>#}
            {#            <hr class="gradient-line"/>#}
            <!--Checkboxes-->
            <!-- Id -->

            {#            <div id="id-checkbox" style="margin-top: 5px;background-color: #c9daf8ff; padding-bottom: 10px; ">#}
            {#                <div style="padding-top: 10px;padding-left: 10px">#}
            {#                    <input type="checkbox" class="checkbox" name="cbStaticValues" value="show-static-values"#}
            {#                           id="show-static-values" checked="checked"><label for="show-static-values"#}
            {#                                                                            style="font-weight: bold;">Show Static#}
            {#                    Values</label>#}
            {#                </div>#}
            {#                <div style="padding-top: 10px;padding-left: 10px">#}
            {#                    <input type="checkbox" class="checkbox" name="cbId" value="show-id" id="show-id"><label#}
            {#                        for="show-id" style="font-weight: bold;">Show comment ID</label>#}
            {#                </div>#}
            {#        </div>#}

            <!-- Targets -->
            <div id="target-checkbox-group"
                 style="margin-top: 5px;background-color: #c9daf8ff; padding-bottom: 10px;">

                <div class="list-group list-group-flush" style="width: 262px;">
                    <button id="targets_accordion_button" type="button"
                            class="accordion btn btn-secondary active"><span
                            style="text-align: center; font-weight: bold; vertical-align: center;" checked>
                    Targets</span>
                        <div id="plus_sign_targets" style="float: right;">
                            &#8722;
                        </div>
                    </button>

                    <div style="padding-left: 10px; padding-right: 10px; padding-top: 10px;display: block;" class="panel">
                        <!-- Dropdown menu -->
                        <!-- <label for="dropdown-targets">Style:</label>
                        <select id="dropdown-targets" name="dropdown-targets">
                            <option value="icon-outside-node">Icons outside the node</option>
                            <option value="icon-on-node">Icons on the node</option>
                            <option value="ring-on-node">Rings on the node</option>
                        </select> -->
                        <div class="text-center">
                            <input class="btn btn-secondary" type="button" name="Check_All" id="check_button_targets" value="Check All"
                                   onClick="CheckAll(document.querySelectorAll('input[type=checkbox][name=cbTargets]'))">
                            <input id="uncheck_button_targets" class="btn btn-secondary" type="button" name="Un_CheckAll" value="Uncheck All"
                                   onClick="UnCheckAll(document.querySelectorAll('input[type=checkbox][name=cbTargets]'))">
                        </div>

                        <!-- Checkboxes-->
                        <div class="custom-control custom-switch" style="margin-top: 10px; line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbTargets"
                                   value="target-group"
                                   id="target-group"
                                   form="main_form"
                                   {% if cbTargets.target_group == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" for="target-group">Target Group
                            </label>
                            <img src="{% static './images/targets/icons/Group.svg' %}" alt="Purple people"
                                 width="20"
                                 height="20" style="float:right; ">
                        </div>

                        <div class="custom-control custom-switch" style="line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbTargets"
                                   value="target-person"
                                   id="target-person" form="main_form"
                                   {% if cbTargets.target_person == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" style="vertical-align: center;" for="target-person">Target Person
                            </label>
                            <img src="{% static './images/targets/icons/Person.svg' %}" alt="Dat with blue person"
                                 width="20" height="20" style="float:right; ">
                        </div>

                        <div class="custom-control custom-switch" style="line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbTargets"
                                   value="target-stereotype"
                                   id="target-stereotype" form="main_form"
                                   {% if cbTargets.target_stereotype == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" for="target-stereotype">Stereotype
                            </label>
                            <img src="{% static './images/targets/icons/Stereotype.svg' %}"
                                 alt="Orange thinking cloud"
                                 width="20" height="20" style="float:right;">
                        </div>

                    </div>
                </div>

            </div>
            <!--Features -->
            <div id="feature-checkbox-group"
                 style="margin-top: 10px;background-color: #c9daf8ff; padding-bottom: 10px;">

                <div class="list-group list-group-flush" style="width: 262px;">
                    <button id="features_accordion_button" type="button"
                            class="accordion btn btn-secondary active"><span
                            style="text-align: center; font-weight: bold; vertical-align: center;" checked>
                    Features</span>
                        <div id="plus_sign_features" style="float: right;">
                            &#8722;
                        </div>
                    </button>

                    <div style="padding-left: 10px; padding-right: 10px; padding-top: 10px;display: block;" class="panel">
                        <div style="padding-bottom: 20px; display: none;">
                            <div style="display:none">
                                <input type="checkbox" class="checkbox" name="cbFeatureProperty" value="dot-feat"
                                       id="dot-feat">
                                <label for="dot-feat">Dot</label>
                                <input type="checkbox" class="checkbox" name="cbFeatureProperty" value="cheese-feat"
                                       id="cheese-feat">
                                <label class="custom-control-label" for="cheese-feat">Trivial cheese</label>
                            </div>
                        </div>
                        <div class="text-center">
                            <input class="btn btn-secondary" type="button" id="check_button_features"
                                   name="check_button_features" value="Check All"
                                   onClick="CheckAll(document.querySelectorAll('input[type=checkbox][name=cbFeatures]'))">
                            <input class="btn btn-secondary" type="button" id="uncheck_button_features"
                                   name="check_button_features" value="Uncheck All"
                                   onClick="UnCheckAll(document.querySelectorAll('input[type=checkbox][name=cbFeatures]'))">
                        </div>
                        <div style="margin-top: 10px;" id="features_checkboxes">

                            <!--Positive features-->

                            <div class="custom-control custom-switch"
                                 style="line-height: 23px; ">
                                <input type="checkbox" class="custom-control-input" name="cbFeatures"
                                       value="constructiveness"
                                       id="constructiveness" form="main_form"
                                       {% if cbFeatures.constructiveness == 1 %}checked{% else %}unchecked{% endif %}>
                                <label class="custom-control-label" for="constructiveness">Constructiveness</label>
                                <div style="float: right">
                                    <svg height="20" width="30" style="display: inline-block;">
                                        <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                fill="#90F6B2"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="custom-control custom-switch" style="line-height: 23px; margin-bottom: 15px;">
                                <input type="checkbox" class="custom-control-input" name="cbFeatures"
                                       value="argumentation"
                                       id="argumentation" form="main_form"
                                       {% if cbFeatures.argumentation == 1 %}checked{% else %}unchecked{% endif %}>
                                <label class="custom-control-label" for="argumentation">Argumentation</label>
                                <div style="float: right">
                                    <svg height="20" width="30" style="display: inline-block;">
                                        <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                fill="#1B8055"/>
                                    </svg>
                                </div>
                            </div>


                            <!--Negative features-->
                            <div class="custom-control custom-switch" style="line-height: 23px;">
                                <input type="checkbox" class="custom-control-input" name="cbFeatures"
                                       value="sarcasm"
                                       id="sarcasm"
                                       form="main_form"
                                       {% if cbFeatures.sarcasm == 1 %}checked{% else %}unchecked{% endif %}>
                                <label class="custom-control-label" for="sarcasm">Sarcasm</label>
                                <div style="float: right">
                                    <svg height="20" width="30" style="display: inline-block;">
                                        <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                fill="#97CFFF"/>
                                    </svg>
                                </div>
                            </div>

                            <div class="custom-control custom-switch" style="line-height: 23px;">
                                <input type="checkbox" class="custom-control-input" name="cbFeatures"
                                       value="mockery"
                                       id="mockery"
                                       form="main_form"
                                       {% if cbFeatures.mockery == 1 %}checked{% else %}unchecked{% endif %}>
                                <label class="custom-control-label" for="mockery">Mockery</label>
                                <div style="float: right">
                                    <svg height="20" width="30" style="display: inline-block;">
                                        <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                fill="#1795FF"/>
                                    </svg>
                                </div>
                            </div>

                            <div class="custom-control custom-switch" style="line-height: 23px;">
                                <input type="checkbox" class="custom-control-input" name="cbFeatures"
                                       value="intolerance"
                                       id="intolerance" form="main_form"
                                       {% if cbFeatures.intolerance == 1 %}checked{% else %}unchecked{% endif %}>
                                <label class="custom-control-label" for="intolerance">Intolerance</label>
                                <div style="float: right">
                                    <svg height="20" width="30" style="display: inline-block;">
                                        <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                fill="#0B5696"/>
                                    </svg>
                                </div>
                            </div>

                            <div class="custom-control custom-switch" style="line-height: 23px;">
                                <input type="checkbox" class="custom-control-input" name="cbFeatures"
                                       value="improper_language"
                                       id="improper_language" form="main_form"
                                       {% if cbFeatures.improper_language == 1 %}checked{% else %}unchecked{% endif %}>
                                <label class="custom-control-label" for="improper_language">Improper language</label>
                                <div style="float: right">
                                    <svg height="20" width="20" style="display: inline-block;">
                                        <circle cx="10" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                fill="#E3B7E8"/>
                                    </svg>
                                </div>
                            </div>

                            <div class="custom-control custom-switch" style="line-height: 23px;">
                                <input type="checkbox" class="custom-control-input" name="cbFeatures" value="insult"
                                       id="insult"
                                       form="main_form"
                                       {% if cbFeatures.insult == 1 %}checked{% else %}unchecked{% endif %}>
                                <label class="custom-control-label" for="insult">Insult</label>
                                <div style="float: right">
                                    <svg height="20" width="30" style="display: inline-block;">
                                        <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                fill="#A313B3"/>
                                    </svg>
                                </div>
                            </div>

                            <div class="custom-control custom-switch" style="line-height: 23px;">
                                <input type="checkbox" class="custom-control-input" name="cbFeatures"
                                       value="aggressiveness"
                                       id="aggressiveness" form="main_form"
                                       {% if cbFeatures.aggressiveness == 1 %}checked{% else %}unchecked{% endif %}>
                                <label class="custom-control-label" for="aggressiveness">Aggressiveness</label>
                                <div style="float: right">
                                    <svg height="20" width="30" style="display: inline-block;">
                                        <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                fill="#5E1566"/>
                                    </svg>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Highligth -->
            <div id="highlight-checkbox-group"
                 style="margin-top: 10px;background-color: #c9daf8ff; padding-bottom: 10px;">
                <div>
                    <div class="list-group list-group-flush" style="width: 262px;">
                        <button id="highlight_accordion_button" type="button"
                                class="accordion btn btn-secondary active"><span
                                style="text-align: center; font-weight: bold; vertical-align: center;" checked>
                    Highlight node & edge</span>
                            <div id="plus_sign_highlight" style="float: right;">
                                &#8722;
                            </div>
                        </button>
                        <div style="padding-top: 10px;padding-left: 10px; display: block;" class="panel">
                            {#                            <input type="checkbox" class="checkbox" name="cbHighlightMenu" value="highlight-group"#}
                            {#                                   id="highlight-group-cb"><label for="highlight-group-cb" style="font-weight: bold;">Filter</label>#}

                            <div class="text-center">
                                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                    <label id="and_label" style="width: 75px; height:fit-content;"
                                           class="btn btn-secondary active">
                                        <input type="radio" name="cbHighlightProperty" value="and-group"
                                               id="and_button" form="main_form"
                                               autocomplete="off"
                                               {% if cbCommons.and_group == 1 %}checked{% else %}unchecked{% endif %}>
                                        AND
                                    </label>
                                    <label id="or_label" style="width: 75px; height:fit-content;"
                                           class="btn btn-secondary">
                                        <input type="radio" name="cbHighlightProperty" value="or-group"
                                               id="or_button" form="main_form"
                                               autocomplete="off"
                                               {% if cbCommons.or_group == 1 %}checked{% else %}unchecked{% endif %}>
                                        OR
                                    </label>
                                </div>
                            </div>
                            <br>
                            <div id="highlight_checks_OR" style="display: none;">
                                <!--Toxicity level-->
                                <div style="padding-top: 10px; padding-right: 10px">
                                    <div class="custom-control custom-switch"
                                         style="line-height: 23px; padding-bottom: 5px;">
                                        <input type="checkbox" class="custom-control-input"
                                               name="cbHighlightOR"
                                               value="highlight-OR-selectAll-toxicity"
                                               id="highlight-OR-selectAll-toxicity" form="main_form"
                                               {% if cbFilterOR.highlight_OR_selectAll_toxicity == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-OR-selectAll-toxicity">Select All
                                        </label>
                                    </div>
                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                               value="highlight-toxicity-0" id="highlight-toxicity-0OR" form="main_form"
                                               {% if cbFilterOR.highlight_toxicity_0 == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-toxicity-0OR">Not toxic
                                        </label>
                                        <div style="float: right">
                                            <svg height="20" width="30" style="display: inline-block;">
                                                <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                        fill="#f7f7f7"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                               value="highlight-toxicity-1" id="highlight-toxicity-1OR" form="main_form"
                                               {% if cbFilterOR.highlight_toxicity_1 == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-toxicity-1OR">Mildly toxic
                                        </label>
                                        <div style="float: right">
                                            <svg height="20" width="30" style="display: inline-block;">
                                                <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                        fill="#cccccc"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                               value="highlight-toxicity-2" id="highlight-toxicity-2OR" form="main_form"
                                               {% if cbFilterOR.highlight_toxicity_2 == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-toxicity-2OR">Toxic</label>
                                        <div style="float: right">
                                            <svg height="20" width="30" style="display: inline-block;">
                                                <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                        fill="#737373"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                               value="highlight-toxicity-3" id="highlight-toxicity-3OR" form="main_form"
                                               {% if cbFilterOR.highlight_toxicity_2 == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-toxicity-3OR">Very toxic</label>
                                        <div style="float: right">
                                            <svg height="20" width="30" style="display: inline-block;">
                                                <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                        fill="#000000"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <hr class="gradient-line" style="margin-top: 5px; margin-bottom: 5px;"/>

                                <!--Stance-->
                                <div>
                                    <div class="custom-control custom-switch"
                                         style="line-height: 23px; padding-bottom: 5px;">
                                        <input type="checkbox" class="custom-control-input"
                                               name="cbHighlightOR"
                                               value="highlight-OR-selectAll-stance"
                                               id="highlight-OR-selectAll-stance" form="main_form"
                                               {% if cbFilterOR.highlight_OR_selectAll_stance == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-OR-selectAll-stance">Select All</label>
                                    </div>
                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                               value="highlight-stance-neutral"
                                               id="highlight-stance-neutralOR" form="main_form"
                                               {% if cbFilterOR.highlight_stance_neutral == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-stance-neutralOR">Neutral stance</label>
                                        <div style="float: right">
                                            <svg height=" 10" width="30" style="display: inline-block;">
                                                <rect width="20" height="10" fill="#2b2727"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                               value="highlight-stance-positive" id="highlight-stance-positiveOR"
                                               form="main_form"
                                               {% if cbFilterOR.highlight_stance_positive == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-stance-positiveOR">Positive stance</label>
                                        <div style="float: right">
                                            <svg height=" 10" width="30" style="display: inline-block;">
                                                <rect width="20" height="10" fill="#77dd77"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                               value="highlight-stance-negative" id="highlight-stance-negativeOR"
                                               form="main_form"
                                               {% if cbFilterOR.highlight_stance_negative == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-stance-negativeOR" checked>Negative stance</label>
                                        <div style="float: right">
                                            <svg height=" 10" width="30" style="display: inline-block;">
                                                <rect width="20" height="10" fill="#ff6961"/>
                                            </svg>
                                        </div>
                                    </div>

                                </div>
                                <hr class="gradient-line" style="margin-top: 5px; margin-bottom: 5px;"/>


                                <!--Target-->
                                <div class="custom-control custom-switch"
                                     style="line-height: 23px; padding-bottom: 5px;">
                                    <input type="checkbox" class="custom-control-input"
                                           name="cbHighlightOR"
                                           value="highlight-OR-selectAll-target"
                                           id="highlight-OR-selectAll-target" form="main_form"
                                           {% if cbFilterOR.highlight_OR_selectAll_target == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-OR-selectAll-target">Select All</label>
                                </div>
                                <div class="custom-control custom-switch"
                                     style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-target-group"
                                           id="highlight-target-groupOR" form="main_form"
                                           {% if cbFilterOR.highlight_target_group == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-target-groupOR">Target group</label>
                                    <img src="{% static './images/targets/icons/Group.svg' %}" alt="Purple people"
                                         width="20"
                                         height="20" style="float:right; margin-right: 10px;">
                                </div>


                                <div class="custom-control custom-switch" style="line-height: 23px;">

                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-target-person"
                                           id="highlight-target-personOR" form="main_form"
                                           {% if cbFilterOR.highlight_target_person == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-target-personOR">Target person</label>
                                    <img src="{% static './images/targets/icons/Person.svg' %}" alt="Purple people"
                                         width="20"
                                         height="20" style="float:right; margin-right: 10px;">
                                </div>
                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-target-stereotype"
                                           id="highlight-target-stereotypeOR" form="main_form"
                                           {% if cbFilterOR.highlight_target_stereotype == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-target-stereotypeOR">Stereotype</label>
                                    <img src="{% static './images/targets/icons/Stereotype.svg' %}"
                                         alt="Purple people"
                                         width="20"
                                         height="20" style="float:right; margin-right: 10px;">
                                </div>

                                <hr class="gradient-line" style="margin-top: 5px; margin-bottom: 5px;"/>

                                <!--Features-->
                                <div class="custom-control custom-switch"
                                     style="line-height: 23px; padding-bottom: 5px;">
                                    <input type="checkbox" class="custom-control-input"
                                           name="cbHighlightOR"
                                           value="highlight-OR-selectAll-features"
                                           id="highlight-OR-selectAll-features" form="main_form"
                                           {% if cbFilterOR.highlight_OR_selectAll_features == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-OR-selectAll-features">Select All</label>
                                </div>


                                <div class="custom-control custom-switch"
                                     style="line-height: 23px; ">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-features-constructiveness"
                                           id="highlight-features-constructivenessOR" form="main_form"
                                           {% if cbFilterOR.highlight_features_constructiveness == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-features-constructivenessOR">Constructiveness</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#90F6B2"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="custom-control custom-switch"
                                     style="line-height: 23px; margin-bottom: 15px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-features-argumentation"
                                           id="highlight-features-argumentationOR" form="main_form"
                                           {% if cbFilterOR.highlight_features_argumentation == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-features-argumentationOR">Argumentation</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#1B8055"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">

                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-features-sarcasm"
                                           id="highlight-features-sarcasmOR" form="main_form"
                                           {% if cbFilterOR.highlight_features_sarcasm == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-features-sarcasmOR">Sarcasm</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#97CFFF"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-features-mockery"
                                           id="highlight-features-mockeryOR" form="main_form"
                                           {% if cbFilterOR.highlight_features_mockery == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-features-mockeryOR">Mockery</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#1795FF"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-features-intolerance"
                                           id="highlight-features-intoleranceOR" form="main_form"
                                           {% if cbFilterOR.highlight_features_intolerance == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-features-intoleranceOR">Intolerance</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#0B5696"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-features-improper-language"
                                           id="highlight-features-improper-languageOR" form="main_form"
                                           {% if cbFilterOR.highlight_features_improper_language == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-features-improper-languageOR">Improper
                                    language</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#E3B7E8"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-features-insult"
                                           id="highlight-features-insultOR" form="main_form"
                                           {% if cbFilterOR.highlight_features_insult == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-features-insultOR">Insult</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#A313B3"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightOR"
                                           value="highlight-features-aggressiveness"
                                           id="highlight-features-aggressivenessOR" form="main_form"
                                           {% if cbFilterOR.highlight_features_aggressiveness == 1 %}checked{% else %}unchecked{% endif %}>
                                    <label class="custom-control-label" for="highlight-features-aggressivenessOR">Aggressiveness</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#5E1566"/>
                                        </svg>
                                    </div>
                                </div>

                            </div>

                            <div id="highlight_checks_AND" style="display: block;">
                                <!--Toxicity level-->
                                <div style="padding-top: 10px; padding-right: 10px">
                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                               value="highlight-toxicity-0" id="highlight-toxicity-0" form="main_form"
                                               {% if cbFilterAND.highlight_toxicity_0 == 1 %}checked{% else %}unchecked{% endif %}>
                                        <label class="custom-control-label" for="highlight-toxicity-0">Not toxic</label>
                                        <div style="float: right">
                                            <svg height="20" width="30" style="display: inline-block;">
                                                <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                        fill="#f7f7f7"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                               value="highlight-toxicity-1" id="highlight-toxicity-1" form="main_form"
                                               {% if cbFilterAND.highlight_toxicity_1 == 1 %}checked{% else %}unchecked{% endif %}
                                        ><label class="custom-control-label"
                                                for="highlight-toxicity-1">Mildly toxic</label>
                                        <div style="float: right">
                                            <svg height="20" width="30" style="display: inline-block;">
                                                <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                        fill="#cccccc"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                               value="highlight-toxicity-2" id="highlight-toxicity-2" form="main_form"
                                               {% if cbFilterAND.highlight_toxicity_2 == 1 %}checked{% else %}unchecked{% endif %}
                                        ><label class="custom-control-label"
                                                for="highlight-toxicity-2">Toxic</label>
                                        <div style="float: right">
                                            <svg height="20" width="30" style="display: inline-block;">
                                                <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                        fill="#737373"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                               value="highlight-toxicity-3" id="highlight-toxicity-3" form="main_form"
                                               {% if cbFilterAND.highlight_toxicity_3 == 1 %}checked{% else %}unchecked{% endif %}
                                        ><label class="custom-control-label"
                                                for="highlight-toxicity-3">Very toxic</label>
                                        <div style="float: right">
                                            <svg height="20" width="30" style="display: inline-block;">
                                                <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                        fill="#000000"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <hr class="gradient-line" style="margin-top: 5px; margin-bottom: 5px;"/>

                                <!--Stance-->
                                <div>
                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                               value="highlight-stance-neutral"
                                               id="highlight-stance-neutral" form="main_form"
                                               {% if cbFilterAND.highlight_stance_neutral == 1 %}checked{% else %}unchecked{% endif %}
                                        ><label class="custom-control-label"
                                                for="highlight-stance-neutral">Neutral
                                        stance</label>
                                        <div style="float: right">
                                            <svg height=" 10" width="30" style="display: inline-block;">
                                                <rect width="20" height="10" fill="#2b2727"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                               value="highlight-stance-positive" id="highlight-stance-positive"
                                               form="main_form"
                                               {% if cbFilterAND.highlight_stance_positive == 1 %}checked{% else %}unchecked{% endif %}
                                        ><label
                                            class="custom-control-label"
                                            for="highlight-stance-positive">Positive stance</label>
                                        <div style="float: right">
                                            <svg height=" 10" width="30" style="display: inline-block;">
                                                <rect width="20" height="10" fill="#77dd77"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="custom-control custom-switch" style="line-height: 23px;">
                                        <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                               value="highlight-stance-negative" id="highlight-stance-negative"
                                               form="main_form"
                                               {% if cbFilterAND.highlight_stance_negative == 1 %}checked{% else %}unchecked{% endif %}><label
                                            class="custom-control-label"
                                            for="highlight-stance-negative">Negative stance</label>
                                        <div style="float: right">
                                            <svg height=" 10" width="30" style="display: inline-block;">
                                                <rect width="20" height="10" fill="#ff6961"/>
                                            </svg>
                                        </div>
                                    </div>

                                </div>
                                <hr class="gradient-line" style="margin-top: 5px; margin-bottom: 5px;"/>


                                <!--Target-->
                                <div class="custom-control custom-switch"
                                     style="line-height: 23px; padding-bottom: 5px;">
                                    <input type="checkbox" class="custom-control-input"
                                           name="cbHighlightAND"
                                           value="highlight-AND-selectAll-target"
                                           id="highlight-AND-selectAll-target" form="main_form"
                                           {% if cbFilterAND.highlight_AND_selectAll_target == 1 %}checked{% else %}unchecked{% endif %}
                                    ><label class="custom-control-label"
                                            for="highlight-AND-selectAll-target">Select All</label>
                                </div>

                                <div class="custom-control custom-switch"
                                     style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-target-group"
                                           id="highlight-target-group" form="main_form"
                                           {% if cbFilterAND.highlight_target_group == 1 %}checked{% else %}unchecked{% endif %}
                                    ><label class="custom-control-label"
                                            for="highlight-target-group">Target
                                    group</label>
                                    <img src="{% static './images/targets/icons/Group.svg' %}" alt="Purple people"
                                         width="20"
                                         height="20" style="float:right; margin-right: 10px;">
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">

                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-target-person"
                                           id="highlight-target-person" form="main_form"
                                           {% if cbFilterAND.highlight_target_person == 1 %}checked{% else %}unchecked{% endif %}

                                    ><label
                                        class="custom-control-label"
                                        for="highlight-target-person">Target
                                    person</label>
                                    <img src="{% static './images/targets/icons/Person.svg' %}" alt="Purple people"
                                         width="20"
                                         height="20" style="float:right; margin-right: 10px;">
                                </div>
                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-target-stereotype"
                                           id="highlight-target-stereotype" form="main_form"
                                           {% if cbFilterAND.highlight_target_stereotype == 1 %}checked{% else %}unchecked{% endif %}

                                    ><label
                                        class="custom-control-label"
                                        for="highlight-target-stereotype">Stereotype</label>
                                    <img src="{% static './images/targets/icons/Stereotype.svg' %}"
                                         alt="Purple people"
                                         width="20"
                                         height="20" style="float:right; margin-right: 10px;">
                                </div>

                                <hr class="gradient-line" style="margin-top: 5px; margin-bottom: 5px;"/>

                                <!--Features-->

                                <div class="custom-control custom-switch"
                                     style="line-height: 23px; padding-bottom: 5px;">
                                    <input type="checkbox" class="custom-control-input"
                                           name="cbHighlightAND"
                                           value="highlight-AND-selectAll-features"
                                           id="highlight-AND-selectAll-features" form="main_form"
                                           {% if cbFilterAND.highlight_AND_selectAll_features == 1 %}checked{% else %}unchecked{% endif %}
                                    ><label class="custom-control-label"
                                            for="highlight-AND-selectAll-features">Select All</label>
                                </div>

                                <div class="custom-control custom-switch"
                                     style="line-height: 23px; ">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-features-constructiveness"
                                           id="highlight-features-constructiveness" form="main_form"
                                           {% if cbFilterAND.highlight_features_constructiveness == 1 %}checked{% else %}unchecked{% endif %}

                                    ><label
                                        class="custom-control-label"
                                        for="highlight-features-constructiveness">Constructiveness</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#90F6B2"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="custom-control custom-switch"
                                     style="line-height: 23px; margin-bottom: 15px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-features-argumentation"
                                           id="highlight-features-argumentation" form="main_form"
                                           {% if cbFilterAND.highlight_features_argumentation == 1 %}checked{% else %}unchecked{% endif %}

                                    ><label
                                        class="custom-control-label"
                                        for="highlight-features-argumentation">Argumentation</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#1B8055"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">

                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-features-sarcasm"
                                           id="highlight-features-sarcasm" form="main_form"
                                           {% if cbFilterAND.highlight_features_sarcasm == 1 %}checked{% else %}unchecked{% endif %}

                                    ><label
                                        class="custom-control-label"
                                        for="highlight-features-sarcasm">Sarcasm</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#97CFFF"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-features-mockery"
                                           id="highlight-features-mockery" form="main_form"
                                           {% if cbFilterAND.highlight_features_mockery == 1 %}checked{% else %}unchecked{% endif %}

                                    ><label
                                        class="custom-control-label"
                                        for="highlight-features-mockery">Mockery</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#1795FF"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-features-intolerance"
                                           id="highlight-features-intolerance" form="main_form"

                                           {% if cbFilterAND.highlight_features_intolerance == 1 %}checked{% else %}unchecked{% endif %}
                                    ><label
                                        class="custom-control-label"
                                        for="highlight-features-intolerance">Intolerance</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#0B5696"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-features-improper-language"
                                           id="highlight-features-improper-language" form="main_form"
                                           {% if cbFilterAND.highlight_features_improper_language == 1 %}checked{% else %}unchecked{% endif %}

                                    ><label class="custom-control-label" for="highlight-features-improper-language">Improper
                                    language</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#E3B7E8"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-features-insult"
                                           id="highlight-features-insult" form="main_form"
                                           {% if cbFilterAND.highlight_features_insult == 1 %}checked{% else %}unchecked{% endif %}

                                    ><label
                                        class="custom-control-label"
                                        for="highlight-features-insult">Insult</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#A313B3"/>
                                        </svg>
                                    </div>
                                </div>

                                <div class="custom-control custom-switch" style="line-height: 23px;">
                                    <input type="checkbox" class="custom-control-input" name="cbHighlightAND"
                                           value="highlight-features-aggressiveness"
                                           id="highlight-features-aggressiveness" form="main_form"
                                           {% if cbFilterAND.highlight_features_aggressiveness == 1 %}checked{% else %}unchecked{% endif %}


                                    ><label class="custom-control-label"
                                            for="highlight-features-aggressiveness">Aggressiveness</label>
                                    <div style="float: right; margin-right: 10px;">
                                        <svg height="20" width="30" style="display: inline-block;">
                                            <circle cx="20" cy="10" r="7" stroke="black" stroke-width="0.5"
                                                    fill="#5E1566"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>

            </div>

            {% if template_selected and template_selected == "tree" %}
            <!-- Devtools -->
            <div id="target-checkbox-group"
                 style="margin-top: 5px;background-color: #c9daf8ff; padding-bottom: 10px;">

                <div class="list-group list-group-flush" style="width: 262px;">
                    <button id="devtools_accordion_button" type="button"
                            class="accordion btn btn-secondary active"><span
                            style="text-align: center; font-weight: bold; vertical-align: center;" checked>
                    Devtools</span>
                        <div id="plus_sign_devtools" style="float: right;">
                            &#8722;
                        </div>
                    </button>
                    <div style="padding-left: 10px; padding-right: 10px; padding-top: 10px; display: block;" class="panel">
                        <!-- Dropdown menu -->
                        <!-- <label for="dropdown-targets">Style:</label>
                        <select id="dropdown-targets" name="dropdown-targets">
                            <option value="icon-outside-node">Icons outside the node</option>
                            <option value="icon-on-node">Icons on the node</option>
                            <option value="ring-on-node">Rings on the node</option>
                        </select> -->
                        <div class="text-center">
                            <input class="btn btn-secondary" type="button" name="Check_All" value="Check All"
                                   onClick="CheckAll(document.querySelectorAll('input[type=checkbox][name=cbDevtools]'))">
                            <input id="uncheck_button_devtools" class="btn btn-secondary" type="button" name="Un_CheckAll" value="Uncheck All"
                                   onClick="UnCheckAll(document.querySelectorAll('input[type=checkbox][name=cbDevtools]'))">
                        </div>

                        <!-- Tendencies -->
                        <div class="custom-control custom-switch" style="margin-top: 10px; line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbDevtools"
                                   value="elongated-tendency"
                                   id="elongated-tendency"
                                   form="main_form"
                                   {% if cbDevtools.elongated_tendency == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" for="elongated-tendency">Elongated Tendency</label>
                            <div style="float: right">
                                <svg height="20" width="30" style="display: inline-block;">
                                    <rect x="10" y="5" width="15" height="15" stroke="black" fill="#88FF00" stroke-width="0.5"/>
                                </svg>
                            </div>
                        </div>

                        <div class="custom-control custom-switch" style="line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbDevtools"
                                   value="compact-tendency"
                                   id="compact-tendency"
                                   form="main_form"
                                   {% if cbDevtools.compact_tendency == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" style="vertical-align: center;" for="compact-tendency">Compact Tendency</label>
                            <div style="float: right">
                                <svg height="20" width="30" style="display: inline-block;">
                                    <rect x="10" y="5" width="15" height="15" stroke="black" fill="#FFBB00" stroke-width="0.5"/>
                                </svg>
                            </div>
                        </div>

                        <div class="custom-control custom-switch" style="line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbDevtools"
                                   value="significant-nodes"
                                   id="significant-nodes"
                                   form="main_form"
                                   {% if cbDevtools.significant_nodes == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" for="significant-nodes">Significant Nodes</label>
                            <div style="float: right">
                                <svg height="20" width="30" style="display: inline-block;">
                                    <rect x="10" y="5" width="15" height="15" stroke="black" fill="#FF5500" stroke-width="0.5"/>
                                </svg>
                            </div>
                        </div>
                        <hr class="gradient-line" style="margin-top: 5px; margin-bottom: 5px;"/>

                        <!-- Hierarchy -->
                        <div class="custom-control custom-switch" style="line-height: 23px; ">
                            <input type="checkbox" class="custom-control-input" name="cbDevtools"
                                   value="elongated-hierarchy"
                                   id="elongated-hierarchy"
                                   form="main_form"
                                   {% if cbDevtools.elongated_hierarchy == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" for="elongated-hierarchy">Elongated Hierarchy</label>
                            <div style="float: right">
                                <svg height="20" width="30" style="display: inline-block;">
                                    <rect x="10" y="5" width="15" height="15" stroke="black" fill="#90F6B2" stroke-width="0.5"/>
                                </svg>
                            </div>
                        </div>

                        <div class="custom-control custom-switch" style="line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbDevtools"
                                   value="compact-hierarchy"
                                   id="compact-hierarchy"
                                   form="main_form"
                                   {% if cbDevtools.compact_hierarchy == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" for="compact-hierarchy">Compact Hierarchy</label>
                            <div style="float: right">
                                <svg height="20" width="30" style="display: inline-block;">
                                    <rect x="10" y="5" width="15" height="15" stroke="black" fill="#1B8055" stroke-width="0.5"/>
                                </svg>
                            </div>
                        </div>

                        <div class="custom-control custom-switch" style="line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbDevtools"
                                   value="nComp-hierarchy"
                                   id="nComp-hierarchy"
                                   form="main_form"
                                   {% if cbDevtools.nComp_hierarchy == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" for="nComp-hierarchy">nCompact Hierarchy</label>
                            <div style="float: right">
                                <svg height="20" width="30" style="display: inline-block;">
                                    <rect x="10" y="5" width="15" height="15" stroke="black" fill="#97CFFF" stroke-width="0.5"/>
                                </svg>
                            </div>
                        </div>

                        <div class="custom-control custom-switch" style="line-height: 23px;">
                            <input type="checkbox" class="custom-control-input" name="cbDevtools"
                                   value="hybrid-hierarchy"
                                   id="hybrid-hierarchy"
                                   form="main_form"
                                   {% if cbDevtools.hybrid_hierarchy == 1 %}checked{% else %}unchecked{% endif %}>
                            <label class="custom-control-label" for="hybrid-hierarchy">Hybrid Hierarchy</label>
                            <div style="float: right">
                                <svg height="20" width="30" style="display: inline-block;">
                                    <rect x="10" y="5" width="15" height="15" stroke="black" fill="#1795FF" stroke-width="0.5"/>
                                </svg>
                            </div>
                        </div>
                        <hr class="gradient-line" style="margin-top: 5px; margin-bottom: 5px;"/>

                        <!-- Variables -->
                        <div class="container">
                            <form name="input-N"
                                  autocomplete="off"
                                  style="display: flex;"
                                  class="btn-form">
                                <b style="float: left; margin: auto;">N:</b>
                                <span class="form-span devtools-span-input">
                                    <input type="number"
                                           id="input-n-field"
                                           class="field-input"
                                           value="25"
                                           min="0" max = "100"/>
                                </span>
                                <input type="button"
                                       class="btn btn-secondary"
                                       style="float: right"
                                       name="btnSubmit"
                                       id="input-n-btn"
                                       value="Submit">
                            </form>
                        </div>

                        <div class="container">
                            <form name="input-L"
                                  class="btn-form"
                                  style="display: flex;"
                                  autocomplete="off">
                                <b style="float: left; margin: auto;">L:</b>
                                <span class="form-span devtools-span-input">
                                    <input type="number"
                                       id="input-l-field"
                                       class="field-input"
                                       value="4"
                                       min="0" max = "100"/>
                                </span>
                                <input type="button"
                                       class="btn btn-secondary"
                                       style="float: right"
                                       name="btnSubmit"
                                       id="input-l-btn"
                                       value="Submit">
                            </form>
                        </div>

                        <div class="container">
                            <form name="input-GFcomp"
                                  class="btn-form"
                                  style="display: flex;"
                                  autocomplete="off">
                                <b style="float: left; margin: auto;">GFc:</b>
                                <span class="form-span devtools-span-input">
                                    <input type="number"
                                           id="input-gfcomp-field"
                                           class="field-input"
                                           value="0.25"
                                           step="0.05"
                                           min="0" max = "1"/>
                                </span>
                                <input type="button"
                                       class="btn btn-secondary"
                                       style="float: right"
                                       name="btnSubmit"
                                       id="input-gfcomp-btn"
                                       value="Submit">
                            </form>
                        </div>

                        <div class="container">
                            <form name="input-GFelon"
                                  class="btn-form"
                                  style="display: flex;"
                                  autocomplete="off">
                                <b style="float: left; margin: auto;">GFe:</b>
                                <span class="form-span devtools-span-input">
                                    <input type="number"
                                           id="input-gfelon-field"
                                           class="field-input"
                                           value="2"
                                           step="0.05"
                                           min="0" max = "100"/>
                                </span>
                                <input type="button"
                                       class="btn btn-secondary"
                                       style="float: right"
                                       name="btnSubmit"
                                       id="input-gfelon-btn"
                                       value="Submit">
                            </form>
                        </div>

                        <div class="container">
                                <form name="input-d"
                                      class="btn-form"
                                      style="display: flex;"
                                      autocomplete="off">
                                    <b style="float: left; margin: auto;">d:</b>
                                    <span class="form-span devtools-span-input">
                                        <input type="number"
                                               id="input-d-field"
                                               class="field-input"
                                               value="6"
                                               min="0" max = "100"/>
                                    </span>
                                    <input type="button"
                                           class="btn btn-secondary"
                                           style="float: right"
                                           name="btnSubmit"
                                           id="input-d-btn"
                                           value="Submit">
                                </form>
                            </div>

                            <div class="container">
                                <form name="input-tol"
                                      class="btn-form"
                                      style="display: flex;"
                                      autocomplete="off">
                                    <b style="float: left; margin: auto;">tol:</b>
                                    <span class="form-span devtools-span-input">
                                        <input type="number"
                                               id="input-tol-field"
                                               class="field-input"
                                               value="0.15"
                                               step="0.05"
                                               min="0" max = "1"/>
                                    </span>
                                    <input type="button"
                                           class="btn btn-secondary"
                                           style="float: right"
                                           name="btnSubmit"
                                           id="input-tol-btn"
                                           value="Submit">
                                </form>
                            </div>

                    </div>
                </div>

            </div>
            {% endif %}
            <!--Legend-->
            {#            <div id="legendGroup">#}
            {#                <p#}
            {#                        style="text-align: center; margin-top: 10px; margin-bottom: 0px; font-weight: bold; font-family:cursive; font-size: 20px;">#}
            {#                    Legend</p>#}
            {#                <hr class="gradient-line"/>#}
            {#                <div#}
            {#                        style="background-color: #69b3a2;margin-top: 10px;margin-bottom: 5px;padding-left: 10px; padding-right: 10px; padding-bottom: 10px;padding-top: 5px;">#}
            {#                    <div>#}
            {#                        <label>News Article</label>#}
            {#                        <div style="float: right">#}
            {#                            <svg height="20" width="20" style="display: inline-block;">#}
            {#                                <circle cx="10" cy="10" r="7" stroke="black" stroke-width="0.5" fill="lightsteelblue"/>#}
            {#                            </svg>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                    <label>Node collapsed with just one direct son</label>#}
            {#                    <div style="float: right">#}
            {#                        <svg height="20" width="20" style="display: inline-block;">#}
            {#                            <circle cx="10" cy="10" r="7" stroke="black" stroke-width="0.5" fill="lightsteelblue"/>#}
            {#                        </svg>#}
            {#                    </div>#}
            {#                </div>#}
            {##}
            {#                <div>#}
            {#                    <label>Node with stance positive and negative</label>#}
            {#                    <div style="float: right">#}
            {#                        <svg height=" 10" width="20" style="display: inline-block;">#}
            {#                            <rect width="20" height="10" fill="#FFA500"/>#}
            {#                        </svg>#}
            {#                    </div>#}
            {#                </div>#}
            {##}
            {#            </div>#}
        </div>

    </div>

    <!-- Modal -->
    {% include 'popup.html' %}

    <div id="tree-container" class="column2" style="width: calc(calc(100vw - (100vw - 100%)) - 290px); position: sticky; position: -webkit-sticky; top: 19px; z-index: 10;">

        <div id="info-popup-msg-container" class="container-fluid p-0">
          <div class="django-message alert m-0 text-center alert-danger alert-dismissible">
            <button type="button" class="close" onclick="hideInfoPopupMsg()">
              <span aria-hidden="True">&times;</span>
            </button>
            <span id="info-popup-msg"></span>
          </div>
        </div>

        <div style="z-index: 50; text-align:center; position: absolute; top: 20px; left: 20px;">
            <button id="subtrees-btn" type="button" class="btn" onclick="showSubtreesMenu()">Subtrees</button>
            {% if from_popup %}
                <div id="main-popup-options">
                <button type="button" class="main-popup-options-btn main-reset-btn" onclick="resetMainContentGraph()"
                title="Returns to the main graph">
                    <img src='{% static 'images/popup/reset-white.png' %}' id='main-popup-options-reset-img' class='main-popup-options-img'>
                </button>
                <button type="button" class="main-popup-options-btn main-interchange-btn" onclick="interchangeMain()"
                title="Open as a Popup">
                    <img src='{% static 'images/popup/interchange-white.png' %}' id='main-popup-options-interchange-img' class='main-popup-options-img'>
                </button>
                </div>
            {% endif %}
            <button id="popup-btn" type="button" class="btn" data-toggle="modal" data-target="#popupModal" style="display: none"></button>
        </div>

        <div id="subtrees-menu-container" class="subtrees-menu-container left-arrow">
            <select id="subtrees-documents-select" class="form-control" aria-label="Select from document" onchange="update_subtrees_menu()">
              <option selected value="all">From all documents</option>
              <option value="current">From current document</option>
            </select>
            <div id="subtrees-menu"></div>
        </div>

        <div style="z-index: 50; text-align:center; position: absolute; margin-top: 35px; right: 356px; width: max-content;">
            <span class="my-statistic" id="my-statistic-name"></span>
            <button id="static_values_button" class="btn btn-primary"
                    style=" top: 150px; z-index: 55; margin-left: 10px; vertical-align: middle; background-color: #eff4fc;">&#8722;
            </button>
        </div>
    </div>

</div>
</html>

<script src="{% static 'js/popup.js' %}"></script>

<script>
    function sidebarCheckMarginTop() {
        const topnavHeight = document.querySelector('.topnav').offsetHeight;
        document.querySelector('#menu-left').style.marginTop = -topnavHeight + "px";
    }
    $(document).ready(sidebarCheckMarginTop);
    window.onresize = sidebarCheckMarginTop;

    update_subtrees_menu();

    var acc = document.getElementsByClassName("accordion");
    var i;

    for (let i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
            /* Toggle between adding and removing the "active" class,
            to highlight the button that controls the panel */
            this.classList.toggle("active");

            /* Toggle between hiding and showing the active panel */
            var panel = this.nextElementSibling;
            if (panel.style.display === "block") {
                panel.style.display = "none";
            } else {
                panel.style.display = "block";
            }
        });
    }

    function CheckAll(chk) {
        console.log("[User] {{ user }} | [interaction] checkall | [Date]", Date.now());
        for (let i = 0; i < chk.length; i++) {
            chk[i].checked = true;
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            chk[i].dispatchEvent(evt);
        }
    }

    function UnCheckAll(chk) {
        console.log("[User] {{ user }} | [interaction] uncheckall | [Date]", Date.now());
        for (let i = 0; i < chk.length; i++) {
            chk[i].checked = false;
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            chk[i].dispatchEvent(evt);
        }

    }

    function codeReadyAndRendered() {
        var checks, evt;
        if ("{{ cbCommons.and_group }}" === "1") {
            document.getElementById("and_label").className = "btn btn-secondary active";
            document.getElementById("or_label").className = "btn btn-secondary";

            document.getElementById("highlight_checks_AND").style = "display: block;";
            document.getElementById("highlight_checks_OR").style = "display: none;";
            checks = document.querySelectorAll("input[type=checkbox][name=cbHighlightAND]");
            for (let i = 0; i < checks.length; i++) {
                evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }

        } else {
            document.getElementById("and_label").className = "btn btn-secondary";
            document.getElementById("or_label").className = "btn btn-secondary active";
            document.getElementById("highlight_checks_AND").style = "display: none;";
            document.getElementById("highlight_checks_OR").style = "display: block;";

            checks = document.querySelectorAll("input[type=checkbox][name=cbHighlightOR]");
            for (let i = 0; i < checks.length; i++) {
                evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        }
    }

    window.onload = function () {
        // To update the view on the filters
        if (codeReady) {
            codeReadyAndRendered();
        } else {
            // If the onLoad function code ends before the ready function code.
            // Listen for the event.
            document.querySelector("body").addEventListener('codeReady', codeReadyAndRendered);
        }
    }

    jQuery("#and_button").click(function () {
        $(this).prop("checked", true);
        document.getElementById("and_label").className = "btn btn-secondary active";
        $('#or_button').prop("checked", false);
        document.getElementById("or_label").className = "btn btn-secondary";

        document.getElementById("highlight_checks_AND").style = "display: block;";
        document.getElementById("highlight_checks_OR").style = "display: none;";
        console.log('[User]', user.split('/')[2], '| [interaction]', 'AND_button', ' | [Date]', Date.now());
    });

    jQuery("#or_button").click(function () {
        $('#and_button').prop("checked", false);
        document.getElementById("and_label").className = "btn btn-secondary";
        $(this).prop("checked", true);
        document.getElementById("or_label").className = "btn btn-secondary active";
        document.getElementById("highlight_checks_AND").style = "display: none;";
        document.getElementById("highlight_checks_OR").style = "display: block;";
        console.log('[User]', user.split('/')[2], '| [interaction]', 'OR_button', ' | [Date]', Date.now());
    });

    var targets_accordion_expanded = true;
    jQuery("#targets_accordion_button").click(function () {
        if (!targets_accordion_expanded) {
            document.getElementById('plus_sign_targets').innerHTML = '&#8722;';
            targets_accordion_expanded = true;
            console.log("[User]", user.split('/')[2], "| [interaction]", "showing_targets_accordion", " | [Date]", Date.now());
        } else {
            document.getElementById('plus_sign_targets').innerHTML = '&#43;'
            targets_accordion_expanded = false;
            console.log("[User]", user.split('/')[2], "| [interaction]", "hidding_targets_accordion", " | [Date]", Date.now());
        }
    });

    var features_accordion_expanded = true;
    jQuery("#features_accordion_button").click(function () {
        if (!features_accordion_expanded) {
            document.getElementById('plus_sign_features').innerHTML = '&#8722;';
            features_accordion_expanded = true;
            console.log("[User]", user.split('/')[2], "| [interaction]", "showing_features_accordion", " | [Date]", Date.now());
        } else {
            document.getElementById('plus_sign_features').innerHTML = '&#43;'
            features_accordion_expanded = false;
            console.log("[User]", user.split('/')[2], "| [interaction]", "hidding_features_accordion", " | [Date]", Date.now());
        }
    });


    var highlight_accordion_expanded = true;
    jQuery("#highlight_accordion_button").click(function () {
        if (!highlight_accordion_expanded) {
            document.getElementById('plus_sign_highlight').innerHTML = '&#8722;';
            highlight_accordion_expanded = true;
            console.log("[User]", user.split('/')[2], "| [interaction]", "showing_highlight_accordion", " | [Date]", Date.now());
        } else {
            document.getElementById('plus_sign_highlight').innerHTML = '&#43;'
            highlight_accordion_expanded = false;
            console.log("[User]", user.split('/')[2], "| [interaction]", "hidding_highlight_accordion", " | [Date]", Date.now());
        }
    });

    var devtools_accordion_expanded = true;
    jQuery("#devtools_accordion_button").click(function () {
        if (!devtools_accordion_expanded) {
            document.getElementById('plus_sign_devtools').innerHTML = '&#8722;';
            devtools_accordion_expanded = true;
            console.log("[User]", user.split('/')[2], "| [interaction]", "showing_devtools_accordion", " | [Date]", Date.now());
        } else {
            document.getElementById('plus_sign_devtools').innerHTML = '&#43;'
            devtools_accordion_expanded = false;
            console.log("[User]", user.split('/')[2], "| [interaction]", "hidding_devtools_accordion", " | [Date]", Date.now());
        }
    });

    var checkboxesToxicityAND = document.querySelectorAll("input[type=checkbox][name=cbHighlightAND][id^=highlight-toxicity-]");


    jQuery('#highlight-toxicity-0').click(function () {
        if (this.checked) {
            checkboxesToxicityAND[1].checked = false;
            checkboxesToxicityAND[2].checked = false;
            checkboxesToxicityAND[3].checked = false;
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            checkboxesToxicityAND[1].dispatchEvent(evt);
            checkboxesToxicityAND[2].dispatchEvent(evt);
            checkboxesToxicityAND[3].dispatchEvent(evt);
        }
    });

    jQuery('#highlight-toxicity-1').click(function () {
        if (this.checked) {
            checkboxesToxicityAND[0].checked = false;
            checkboxesToxicityAND[2].checked = false;
            checkboxesToxicityAND[3].checked = false;
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            checkboxesToxicityAND[0].dispatchEvent(evt);
            checkboxesToxicityAND[2].dispatchEvent(evt);
            checkboxesToxicityAND[3].dispatchEvent(evt);
        }
    });

    jQuery('#highlight-toxicity-2').click(function () {
        if (this.checked) {
            checkboxesToxicityAND[0].checked = false;
            checkboxesToxicityAND[1].checked = false;
            checkboxesToxicityAND[3].checked = false;
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            checkboxesToxicityAND[0].dispatchEvent(evt);
            checkboxesToxicityAND[1].dispatchEvent(evt);
            checkboxesToxicityAND[3].dispatchEvent(evt);
        }
    });

    jQuery('#highlight-toxicity-3').click(function () {
        if (this.checked) {
            checkboxesToxicityAND[0].checked = false;
            checkboxesToxicityAND[1].checked = false;
            checkboxesToxicityAND[2].checked = false;
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            checkboxesToxicityAND[0].dispatchEvent(evt);
            checkboxesToxicityAND[1].dispatchEvent(evt);
            checkboxesToxicityAND[2].dispatchEvent(evt);
        }
    });

    jQuery('#highlight-OR-selectAll-toxicity').click(function () {
        var checks = document.querySelectorAll("input[type=checkbox][name=cbHighlightOR][id^=highlight-toxicity-]");
        if (this.checked) {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = true;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        } else {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = false;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        }
    });

    jQuery('#highlight-OR-selectAll-stance').click(function () {
        var checks = document.querySelectorAll("input[type=checkbox][name=cbHighlightOR][id^=highlight-stance-]");
        if (this.checked) {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = true;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        } else {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = false;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        }
    });

    jQuery('#highlight-OR-selectAll-target').click(function () {
        var checks = document.querySelectorAll("input[type=checkbox][name=cbHighlightOR][id^=highlight-target-]");
        if (this.checked) {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = true;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        } else {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = false;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        }
    });

    jQuery('#highlight-OR-selectAll-features').click(function () {
        var checks = document.querySelectorAll("input[type=checkbox][name=cbHighlightOR][id^=highlight-features-]");
        if (this.checked) {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = true;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        } else {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = false;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        }
    });


    jQuery('#highlight-AND-selectAll-target').click(function () {
        var checks = document.querySelectorAll("input[type=checkbox][name=cbHighlightAND][id^=highlight-target-]");
        if (this.checked) {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = true;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        } else {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = false;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        }
    });

    jQuery('#highlight-AND-selectAll-features').click(function () {
        var checks = document.querySelectorAll("input[type=checkbox][name=cbHighlightAND][id^=highlight-features-]");
        if (this.checked) {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = true;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        } else {
            for (let i = 0; i < checks.length; i++) {
                checks[i].checked = false;
                var evt = document.createEvent("HTMLEvents");
                evt.initEvent("change", false, true);
                checks[i].dispatchEvent(evt);
            }
        }
    });

    function update_subtrees_menu() {
        let selectFrom = document.getElementById("subtrees-documents-select").value;
        $('#subtrees-menu').html('').load(
            "{% url 'update_subtrees_menu' %}?selected_item=" + '{{ selected_item }}' + "&from_documents=" + selectFrom,
            function () {
                if ('{{ from_popup }}') {
                    $('[name="open_popup_btn"]').addClass("disabled");
                }
            });
    }

    function showSubtreesMenu(){
        document.querySelector(".subtrees-menu-container").classList.toggle("show-menu");
    }


    if ('{{ from_popup }}') {
        if ('{{ subtree_name }}') {
            document.getElementById("my-statistic-name").textContent = "Summary of {{ subtree_name }}";
        } else {
            document.getElementById("my-statistic-name").textContent="Summary of Subtree";
        }
    } else {
        document.getElementById("my-statistic-name").textContent="Summary of {{ selected_item }}";
    }

    if ("{{ template_selected }}" === "circle") {
        document.getElementById("subtrees-btn").classList.add("blue-background");

        // We deactivate the functionalities (filters) that do not belong to the Circle Packing layout
        deactivateFiltersCircle();
    }
    if ('{{ from_popup }}') {
        document.getElementById("from_popup_main_input").name = 'from_popup';
        document.getElementById("from_popup_main_input").value = '{{ from_popup }}';
    } else if ('{{ from_main }}') {
        document.getElementById("from_popup_main_input").name = 'from_main';
        document.getElementById("from_popup_main_input").value = '{{ from_main }}';
    }
    if ('{{ subtree_name }}') {
        document.getElementById("popupModal").subtree_name = '{{ subtree_name }}';
    }
    if ('{{ from_popup }}' || '{{ from_main }}') {
        document.getElementById("popupModal").subtree_node_ids = '{{ subtree_nodes_ids }}';
        document.getElementById("popupModal").subtree_document_description = '{{ subtree_document_description }}';

        let form = document.getElementById("main_form")

        let inputNodesIDs = document.createElement("input");
        inputNodesIDs.setAttribute("type", "hidden");
        inputNodesIDs.setAttribute("name", "subtree_nodes_ids");
        inputNodesIDs.setAttribute("value", '{{ subtree_nodes_ids }}');
        form.appendChild(inputNodesIDs);

        let inputDocumentDesc = document.createElement("input");
        inputDocumentDesc.setAttribute("type", "hidden");
        inputDocumentDesc.setAttribute("name", "subtree_document_description");
        inputDocumentDesc.setAttribute("value", '{{ subtree_document_description }}');
        form.appendChild(inputDocumentDesc);
    }
    if ('{{ from_popup }}' === 'interchange' || '{{ from_main }}' === 'interchange') {
        d3.json('/static/{{ popup_dataset }}', function (error, treeData) {
            let root = treeData;
            var i = 0;

            function recurse(node, parent) {
                node.parent = parent; //We assign a parent to the node
                if (parent) node.depth = node.parent.depth + 1; //If parent is not null
                if (node.children) node.children.forEach(element => recurse(element, node));
                if (!node.id) node.id = ++i;
            }
            root.depth = 0;
            recurse(root, null);

            hierarchyName = getHierarchyName(root, L, GFcomp, d_lvl);
            datasetPopup = '/static/{{ popup_dataset }}';

            if ('{{ from_popup }}' === 'interchange') {
                document.querySelector(".modal .modal-footer").style.padding = "0.375rem";
                document.getElementById("send-popup-content").style.display = "none";
                document.getElementById("add-subtree-form").style.display = "none";
                document.getElementById("modal-info-alert").style.display = "block";
            } else if ('{{ from_main }}' === 'interchange') {
                if ('{{ subtree_name }}') {
                    document.querySelector(".modal .modal-footer").style.padding = "0.375rem";
                    document.getElementById("add-subtree-form").style.display = "none";
                    document.getElementById("send-popup-content").style.display = "block";
                    document.getElementById("modal-subtree-name").innerText = "Subtree {{ subtree_name }}";
                    document.getElementById("modal-subtree-name").style.display = "block";
                }
            }

            $("#popup-btn").click();
            $(popup_container).trigger("open");
        });
    }
    function resetMainContentGraph(){
        document.getElementById("from_popup_main_input").name = '';
        $('#dataset_dropdown').trigger('change');
    }
    function interchangeMain(){

        document.getElementById("from_popup_main_input").name = 'from_main';
        document.getElementById("from_popup_main_input").value = 'interchange';

        let form = document.getElementById("main_form")
        let formData = new FormData(form);
        formData.append('subtree_nodes_ids', document.getElementById("popupModal").subtree_node_ids);
        formData.append('subtree_document_description', document.getElementById("popupModal").subtree_document_description);

        $.ajax({
            type: "POST",
            url: "{% url 'generate_dataset' %}",
            data: formData,
            // handle a successful response
            success: function (data) {

                let inputLayoutName = document.createElement("input");
                inputLayoutName.setAttribute("id", "layout_name_item");
                inputLayoutName.setAttribute("type", "hidden");
                inputLayoutName.setAttribute("name", "best_layout_selected");
                inputLayoutName.setAttribute("value", "");
                form.appendChild(inputLayoutName);

                let inputNodesIDs = document.createElement("input");
                inputNodesIDs.setAttribute("type", "hidden");
                inputNodesIDs.setAttribute("name", "subtree_nodes_ids");
                inputNodesIDs.setAttribute("value", document.getElementById("popupModal").subtree_node_ids);
                form.appendChild(inputNodesIDs);

                currentSubtreeName = document.getElementById("popupModal").subtree_name;
                if (currentSubtreeName) {
                    let inputSubtreeName = document.createElement("input");
                    inputSubtreeName.setAttribute("type", "hidden");
                    inputSubtreeName.setAttribute("name", "subtree_name");
                    inputSubtreeName.setAttribute("value", currentSubtreeName);
                    form.appendChild(inputSubtreeName);
                }

                let inputDocumentDesc = document.createElement("input");
                inputDocumentDesc.setAttribute("type", "hidden");
                inputDocumentDesc.setAttribute("name", "subtree_document_description");
                inputDocumentDesc.setAttribute("value", document.getElementById("popupModal").subtree_document_description);
                form.appendChild(inputDocumentDesc);

                d3.json(data, function (error, treeData) {
                    let root = treeData;
                    var i = 0;

                    function recurse(node, parent) {
                        node.parent = parent; //We assign a parent to the node
                        if (parent) node.depth = node.parent.depth + 1; //If parent is not null
                        if (node.children) node.children.forEach(element => recurse(element, node));
                        if (!node.id) node.id = ++i;
                    }
                    root.depth = 0;
                    recurse(root, null);

                    let hierarchyName = getHierarchyName(root, L, GFcomp, d_lvl);
                    let layoutNameElem = document.getElementById("layout_name_item");

                    switch(hierarchyName) {
                      case "Unspecified":
                        layoutNameElem.value = "force";
                        break;
                      case "Elongated":
                        layoutNameElem.value = "tree";
                        break;
                      case "Compact":
                        layoutNameElem.value = "radial";
                        break;
                      case "nCompact":
                        layoutNameElem.value = "force";
                        break;
                      case "Hybrid":
                        layoutNameElem.value = "force";
                        break;
                    }
                    form.submit();
                });
            },
            // handle a non-successful response
            error: function(jqXHR, textStatus, errorThrown) { // on error..
                handleSimpleAjaxError(jqXHR, textStatus, errorThrown)
            },
            cache: false,
            contentType: false,
            processData: false,
        })
    }
    function hideInfoPopupMsg() {
        document.getElementById("info-popup-msg-container").style.display = "none";
    }
</script>