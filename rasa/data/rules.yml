version: "2.0"

rules:

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot

# Check if it is the user's first connection. Ask for his name if it is.
- rule: First bot interaction with the user
  steps:
  - intent: start_intent
  - action: utter_greet
  - action: action_check_nickname

# Check if it is the user's first connection. Ask for his name if it is.
- rule: New bot interaction with user after previous messages
  steps:
  - intent: new_start_intent
  - action: utter_greet_again
  - action: action_check_nickname

- rule: Bot offers assistance to the user after being greeted
  steps:
  - intent: greet
  - action: utter_offers_help
  - action: action_listen

- rule: Ask user for confirmation to logout
  steps:
  - intent: logout
  - action: utter_logout_confirmation

- rule: The user has requested to log in and the data collection form is started
  steps:
  - intent: login
  - action: action_check_session_login
  wait_for_user_input: false

- rule: The user enters his or her data in the form to log in
  condition:
  - active_loop: login_form
  steps:
  - action: login_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_login

- rule: The user has requested to register and the data collection form is started
  steps:
  - intent: signup
  - action: action_check_session_signup
  wait_for_user_input: false

- rule: The user enters his data in the form to register on the website
  condition:
  - active_loop: signup_form
  steps:
  - action: signup_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_signup

- rule: The user enters the document to be opened
  steps:
  - active_loop: document_selection_form
  - active_loop: null
  - slot_was_set:
      - requested_slot: null
  - action: action_open_document
