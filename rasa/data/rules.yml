version: "2.0"

rules:

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot

# Check if it is the user's first connection. Ask for his name if it is.
- rule: First bot interaction with the user
  steps:
  - intent: start_intent
  - action: action_greet
  wait_for_user_input: false

- rule: Bot offers assistance to the user after being greeted
  steps:
  - intent: greet
  - action: utter_offers_help
  - action: action_listen

- rule: Ask user for confirmation to logout
  steps:
  - intent: logout
  - action: utter_logout_confirmation

- rule: User has requested to log in and the data collection form is started
  steps:
  - intent: login
  - action: action_check_session_login
  wait_for_user_input: false

- rule: User enters his or her data in the form to log in
  condition:
  - active_loop: login_form
  steps:
  - action: login_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_login

- rule: User has requested to register and the data collection form is started
  steps:
  - intent: signup
  - action: action_check_session_signup
  wait_for_user_input: false

- rule: User enters his data in the form to register on the website
  condition:
  - active_loop: signup_form
  steps:
  - action: signup_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_signup

- rule: User enters the document to be opened
  steps:
  - active_loop: document_selection_form
  - active_loop: null
  - slot_was_set:
      - requested_slot: null
  - action: action_open_document

# change the layout
- rule: User wants to change the layout, without specifying to which one
  steps:
  - intent: change_layout
  - action: utter_change_layout

- rule: User wants to change the layout to Tree
  steps:
  - intent: change_layout_tree
  - action: utter_change_layout_tree

- rule: User wants to change the layout to Force
  steps:
  - intent: change_layout_force
  - action: utter_change_layout_force

- rule: User wants to change the layout to Radial
  steps:
  - intent: change_layout_radial
  - action: utter_change_layout_radial

- rule: User wants to change the layout to Circle Packing
  steps:
  - intent: change_layout_circle
  - action: utter_change_layout_circle

- rule: Displays in the chat the message indicated by the User (client side)
  steps:
  - intent: generate_response_message
  - action: action_generate_response_message

- rule: Automatically fills slots with values passed as entities
  steps:
  - intent: set_slots
  - action: action_set_slots

# OR / AND highlighting
- rule: User wants to change the highlighting option to AND
  steps:
  - intent: switch_and
  - action: utter_switch_and

- rule: User wants to change the highlighting option to OR
  steps:
  - intent: switch_or
  - action: utter_switch_or

- rule: User wants to uncheck all highlighting filters
  steps:
  - intent: highlight_uncheck_all
  - action: utter_highlight_uncheck_all

- rule: User wants to uncheck one or more filters
  steps:
  - intent: highlight_uncheck
  - action: action_highlight_uncheck

- rule: User wants to uncheck one or more filters
  steps:
  - intent: highlight_check
  - action: action_highlight_check

- rule: User wants to switch one or more filters
  steps:
  - intent: highlight_switch
  - action: action_highlight_switch

# complex intent stories
# highlight (for now) longest thread, largest thread, widest thread
- rule: User wants to see the longest thread
  steps:
    - intent: longest_thread
    - action: utter_longest_thread

- rule: User wants to see the widest level/depth
  steps:
    - intent: widest_level
    - action: utter_widest_level

- rule: User wants to see the largest thread
  steps:
    - intent: largest_thread
    - action: utter_largest_thread

#highlight most toxic thread
- rule: User wants to see the most toxic thread
  steps:
    - intent: most_toxic_thread
    - action: utter_most_toxic_thread

#highlight most toxic subtree
- rule: User wants to see the most toxic subtree
  steps:
    - intent: most_toxic_subtree
    - action: utter_most_toxic_subtree

# comment level and level of toxicity
- rule: User wants to see which comment level have the most toxic nodes
  steps:
    - intent: comment_level_vs_very_toxic
    - action: utter_comment_level_vs_very_toxic

# combination of features and level of toxicity
- rule: User wants to see the most occurred combination of features in very toxic nodes
  steps:
    - intent: combination_features_very_toxic
    - action: utter_combination_features_very_toxic

- rule: User wants to see the most occurred combination of features in toxic nodes
  steps:
    - intent: combination_features_toxic
    - action: utter_combination_features_toxic

- rule: User wants to see the most occurred combination of features in mildly toxic nodes
  steps:
    - intent: combination_features_mildly_toxic
    - action: utter_combination_features_mildly_toxic

- rule: User wants to see the most occurred combination of features in non toxic nodes
  steps:
    - intent: combination_features_non_toxic
    - action: utter_combination_features_non_toxic

# comment level
- rule: User wants to see the most occurred combination of features in comment level 1
  steps:
    - intent: combination_features_CL1
    - action: utter_combination_features_CL1

- rule: User wants to see the most occurred combination of features in comment level 2
  steps:
    - intent: combination_features_CL2
    - action: utter_combination_features_CL2

- rule: User wants to see nodes only in comment level 1
  steps:
    - intent: comment_level_1
    - action: utter_comment_level_1

- rule: User wants to see nodes only in comment level 2
  steps:
    - intent: comment_level_2
    - action: utter_comment_level_2

- rule: User wants to see argument and constructive nodes in comment level 1
  steps:
    - intent: CL1_argument_constructive
    - action: utter_CL1_argument_constructive

- rule: User wants to see argument and constructive nodes in comment level 2
  steps:
    - intent: CL2_argument_constructive
    - action: utter_CL2_argument_constructive

# features vs features or level of toxicity
- rule: User wants to see which features are tagged with constructive nodes
  steps:
    - intent: constructive_feature
    - action: utter_constructiveness_feature

- rule: User wants to see which in which level of toxicity there are more target person nodes
  steps:
    - intent: target_person_loT
    - action: utter_target_person_loT

- rule: User wants to see the statistics of all the features of the tree
  steps:
    - intent: statistics_features_tree
    - action: utter_statistics_features_tree
  wait_for_user_input: false

- rule: User wants to compare the statistics of all the features of the subtrees
  steps:
    - intent: statistics_features_subtrees
    - action: utter_statistics_features_subtrees
  wait_for_user_input: false

#- rule: User wants to compare the statistics of all the features of the subtrees after bot asking
#  steps:
#    - intent: affirm
#    - action: utter_statistics_features_subtrees

- rule: User wants to know about glyphs
  steps:
    - intent: help_glyphs
    - action: utter_explain_glyphs

- rule: User wants to know about layouts
  steps:
    - intent: help_layouts
    - action: utter_help_layouts

- rule: User wants to know about highlights
  steps:
    - intent: help_highlight
    - action: utter_help_highlight

- rule: User want to know about what summary does
  steps:
    - intent: help_summary
    - action: utter_help_summary


- rule: User wants to know about main graph button
  steps:
    - intent: help_main_graph_barchart
    - action: utter_help_main_bar
  wait_for_user_input: false

- rule: User wants to know about sub graphs button
  steps:
    - intent: help_subtree_barchart
    - action: utter_help_subtree_bar


- rule: User wants to know about AND
  steps:
    - intent: help_AND
    - action: utter_help_AND

- rule: User wants to know about OR
  steps:
    - intent: help_OR
    - action: utter_help_OR

- rule: User wants to know about the difference of AND/OR
  steps:
    - intent: help_AND_OR
    - action: utter_help_AND_OR

- rule: user wants to know what bot can do
  steps:
    - intent: help_what_can_you_do
    - action: utter_help_what_can_you_do


